## 网络 5 层分层
* 运输层
* 网络层
* 链路层
* 物理层

### 应用层
对应协议：HTTP、FTP

#### HTTP
* HTTP 非持续连接的缺点：时间和空间的浪费
    - 每个请求创建一个连接，增加 web server 的负担。
    - 每个对象需经受 2 倍的 RTT 交付时间。

* HTTP 报文
    - 请求报文的通用格式：请求行(方法、URL、版本)、首部行(首部字段)、空行、实体体(POST 使用传递参数)。
    - 响应报文的通用格式：状态行(版本、状态码、短语)、首部行、空行、实体体()。
* 请求行方法：GET、POST、HEAD、PUT、DELETE。`用表单生成的数据不是必须使用 POST 方法。`
* 状态码：200、301、400、404、500、505。
* HTTP 是无状态的连接，它是如何识别用户的？
使用 cookie。cookie 在无状态的 HTTP 上建立了一个用户会话层。cookie 的争议：侵犯用户隐私。
* cookie 的使用到的组件：HTTP响应报文/HTTP 请求报文中的 cookie 首部行；用户端系统保留的 cookie 文件，由浏览器管理；web 站点的后端数据库。cookie 的内容为 唯一标识码。

* web 缓存/代理服务器
    - 用户发请求到缓存器，若缓存器存在请求对象，则直接返回请求对象。
    - 若不存在则缓存器在将请求转发给初始服务器，初始服务器将请求对象返回给缓存器。
    - 缓存器将请求对象缓存并返回给用户。
好处：节约流量，改善性能。

* 如何解决缓存器数据过时的问题？
通过条件 GET (Conditional GET) 解决。
    - 请求报文使用 GET 方法。
    - 请求报文中包含 `If-Modified-Since` 首部行。

* CDN(Content Distribution Network)

#### SMTP
* 一般不使用中间邮件服务器。
* 默认使用的端口为 25。底层使用的是 TCP。
* 流程：send agent -> send server -> recive agent -> recive server。

#### HTTP 与 SMTP
* HTTP 是拉协议；SMTP 是推协议。
* SMTP 要求每个报文采用 7 比特 ASCII码，HTTP 没有这个限制。
* 处理包含文本又包含图形的文档方式不同，HTTP 将各自的对象放在各自的响应报文中；SMTP将所有的报文对象放在一个报文中。

#### DNS(Domain Name System)
* DNS 位于应用层。默认端口为 53。运行于 UDP 之上。
* 识别主机的两种方式：主机名/IP地址(IPv4 4字节)。
* DNS 是一个又分层的 DNS 服务器实现的分布式数据库；一个能使主机查询分布式数据库的应用层协议。


### 运输层
对应协议：TCP、UDP

#### UDP 报文格式
|   UDP 报文格式| |
|  :----:  |:----:  |
| 源端口号（16bit） | 目的端口号（16bit） |
| 长度  | 检验和 |
| 应用数据 |
   
#### UDP 的检验和

#### TCP 报文格式

#### TCP 三次握手

1、client -> server，SYN 标志位为1，不包含应用层数据，被称为 SYN 报文段。它会随机给序号生成一个初始值： client_isn（用来防止网络攻击）。

2、server -> client，SYN 标志位为1，被称为 SYNACK 报文段。确认号（ack）为 client_isn + 1，序号（seq）为 server_isn。

3、client -> server，SYN 标志位为 0。确认好（ack） 为 server_isn + 1，序号（seq） 为  client_isn + 1。

至此，连接建立。

#### TCP 四次挥手

#### UDP 与 TCP 总结


### 网络层
对应协议：IP


### 链路层
对应协议：

### 物理层
对应协议：



### 硬件工作原理、名词解释
* 集线器
* 链路层交换机
* 路由器
* IP（Internet Protool） 地址：位于网络层，24 位(IPv4) 或 48 位 (IPv6) ，运营商提供，可修改，用来定位计算机的逻辑地址。
* MAC（Media Access Control） 地址：位于数据链路层，48位（6字节），厂家烧纸，不可修改，用来定位计算机的物理地址。
* 为什么有了 Mac 地址还需要 IP 地址？
